<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
  </head>
  <body>
    
    <h1 style='text-align: center; margin-bottom: -35px;'>Thank you for your Purchase! ðŸŽ‰</h1>
    
    <br><br>

    <p style='text-align: center; margin-bottom: -35px;'>Please insert a username that you can use to access observations 5-21.</p>

    <br><br>
    
    <input id="username" type="text" value="" placeholder="username" rows="10" cols="100" style="display:block; text-align: left; width: 150px;">

<!-- View results -->
<div id="output" style="font-family:courier;font-size:24px;height:300px"></div>

<script>

// ----------------------------------------------------

  const outp = document.getElementById('output');
  
var repoOwner = "CodeSolutions2";
var repoName = "Webapp_book_hidden"
var filename = "data.txt"
  
// ----------------------------------------------------
// Way 0: REST API
// ----------------------------------------------------
def PUT_input_to_file() {

   await (await fetch(
    `https://api.github.com/repos/${repoOwner}/${repoName}/contents/${filename}`,
    {
      method: 'PUT',
      headers: {
        Accept: 'application/vnd.github+json',
        Authorization: `Bearer ${auth}`
      },
      body: JSON.stringify({
        message: message,
        content: btoa(content),
        sha: existingFile.sha,
      }),
    }
  )).json();

}
  
// ----------------------------------------------------

def GET_data_from_file_way0() {
  
const existingFile = await (await fetch(
    `https://api.github.com/repos/${repoOwner}/${repoName}/contents/${filename}`,
    {
      method: 'GET',
      headers: {
        Accept: 'application/vnd.github+json',
        Authorization: `Bearer ${auth}`
      }
    }
  )).json();

}
  
// ----------------------------------------------------

// Start with something simple
def create_txt_fileElement() {
  
  const file = document.createElement('file');

  // file.setAttribute('src', 'https://github.com/CodeSolutions2/Webapp_book_hidden/data.csv');
  file.setAttribute('src', `https://api.github.com/repos/${repoOwner}/${repoName}/contents/${filename}`);

  file.setAttribute('id', 'text-file-input');
  file.setAttribute('accept', '.txt');

  document.body.appendChild('file');
  
}

// ----------------------------------------------------

def GET_data_from_file_way1() {

  const reader = new FileReader();

  const file = event.target.files[0];

  reader.onload = function (e) {
    // document.getElementById('output').textContent = e.target.result;
    // OR
    outp.innerHTML += e.target.result;
  }
  reader.readAsText(file);

}


// ----------------------------------------------------
  
</script>

  </body>
</html>
